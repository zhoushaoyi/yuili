# 配置修改完整检查清单

## 修改前检查

- [ ] 确认当前检测已停止
- [ ] 备份 `config/Configuration.json`
  ```bash
  copy config\Configuration.json config\Configuration.json.backup
  ```

## 修改 Configuration.json

- [ ] 用文本编辑器打开 `config/Configuration.json`
- [ ] 修改物品信息（name 和/或 quantity）
- [ ] **立即保存文件** (Ctrl+S)
- [ ] 关闭编辑器

## 验证配置文件格式

- [ ] 运行诊断工具：
  ```bash
  python scripts/check_config.py
  ```
- [ ] 检查输出中是否包含：
  - ✓ Configuration.json 加载成功
  - ✓ 物品清单列表显示正确
  - ✓ 所有检查通过

## 启动检测

- [ ] 打开 Web 界面 (http://localhost:5000)
- [ ] 点击"启动"按钮
- [ ] **查看控制台输出**，应该看到：
  ```
  [重新加载配置] .../config/Configuration.json
    文件修改时间: ...
    规范化后的物品列表: ['class1', 'class2', ...]
  ```

## 功能测试

- [ ] 检测界面显示正确的物品清单
- [ ] 报警信息包含正确的物品名称
- [ ] 统计数字与修改后的配置一致

## 问题排查

如果配置未生效，按以下顺序排查：

1. **确认文件保存**
   - [ ] 在编辑器中再次确认已保存
   - [ ] 用记事本打开验证内容

2. **检查 JSON 格式**
   - [ ] 所有属性名用双引号
   - [ ] 没有多余逗号
   - [ ] 花括号和方括号配对正确
   - [ ] 运行 `python scripts/check_config.py`

3. **查看控制台日志**
   - [ ] 启动检测后查看控制台
   - [ ] 搜索 "[重新加载配置]" 消息
   - [ ] 检查是否有错误信息

4. **重新启动**
   - [ ] 停止当前检测
   - [ ] 关闭整个程序
   - [ ] 重新启动程序
   - [ ] 在 Web 界面点击"启动"

5. **恢复备份**
   - [ ] 如果无法修复，恢复备份：
     ```bash
     copy config\Configuration.json.backup config\Configuration.json
     ```

## 常见错误检查

错误消息 | 原因 | 解决方法
---------|------|--------
`❌ 配置文件不存在` | 文件路径不对 | 确保文件在 `config/Configuration.json`
`❌ 配置文件格式错误` | JSON 语法错误 | 检查 JSON 格式，查看具体错误信息
`❌ class0需包含name与contains字段` | 结构不完整 | 确保包含 "name" 和 "contains" 两个字段
`❌ 严重警告: 配置文件加载失败` | 其他错误 | 运行 `python scripts/check_config.py` 获取详细信息

## 完成后

- [ ] 验证所有检查通过
- [ ] 保存本检查清单供下次参考
- [ ] 如有问题，参考 `docs/配置系统说明.md`

---

**提示**: 可以将此文件打印出来，每次修改配置时勾选相应项目。
