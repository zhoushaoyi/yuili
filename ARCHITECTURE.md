é¡¹ç›®æ¶æ„æ–‡æ¡£
=====================================

## ç›®å½•ç»“æ„

```
yuili/
â”œâ”€â”€ app.py                          # Flask ä¸»åº”ç”¨ç¨‹åº
â”œâ”€â”€ main.py                         # ç‹¬ç«‹å¤„ç†è„šæœ¬ï¼ˆç”¨äºç¦»çº¿å¤„ç†ï¼‰
â”‚
â”œâ”€â”€ config/                         # ğŸ”§ é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ Configuration.json          # ä¸šåŠ¡é…ç½®
â”‚   â””â”€â”€ config.py                   # é»˜è®¤å‚æ•°å®šä¹‰
â”‚
â”œâ”€â”€ core/                           # ğŸ¯ è§†è§‰æ£€æµ‹å¼•æ“ï¼ˆä¸ä¾èµ–ä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ detection.py                # YOLO æ£€æµ‹å™¨åŒ…è£…
â”‚   â”œâ”€â”€ tracker.py                  # SORT è¿½è¸ªå™¨
â”‚   â”œâ”€â”€ camera.py                   # æ‘„åƒå¤´ç®¡ç†ï¼ˆUSB/è§†é¢‘æ–‡ä»¶ï¼‰
â”‚   â””â”€â”€ fps.py                      # FPS ç»Ÿè®¡ç®¡ç†
â”‚
â”œâ”€â”€ modules/                        # ğŸ“¦ ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆä¾èµ– coreï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ detector_thread.py          # åå°æ£€æµ‹çº¿ç¨‹ï¼ˆä¸»å¾ªç¯ï¼‰
â”‚   â”œâ”€â”€ video_processor.py          # èµ„æºå®¹å™¨ï¼ˆåˆå§‹åŒ–æ¨¡å—ï¼‰
â”‚   â”œâ”€â”€ alert_manager.py            # å‘Šè­¦è§†é¢‘å½•åˆ¶
â”‚   â”œâ”€â”€ inventory.py                # åº“å­˜ç®¡ç†å’Œç¼ºå¤±æ£€æµ‹
â”‚   â”œâ”€â”€ frame_processor.py          # å•å¸§å¤„ç†æµæ°´çº¿
â”‚   â””â”€â”€ light_controller.py         # ä¸‰è‰²ç¯æ§åˆ¶
â”‚
â”œâ”€â”€ utils/                          # ğŸ”¨ å·¥å…·å‡½æ•°å’Œè¾…åŠ©ç±»
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config_loader.py            # é…ç½®åŠ è½½ï¼ˆpathlib æ ‡å‡†åŒ–ï¼‰
â”‚   â”œâ”€â”€ visualizer.py               # OpenCV ç»˜å›¾
â”‚   â””â”€â”€ source_handler.py           # è§†é¢‘æºå¤„ç†
â”‚
â”œâ”€â”€ scripts/                        # ğŸš€ ç‹¬ç«‹è„šæœ¬
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ [å¾…å®š]
â”‚
â”œâ”€â”€ static/                         # å‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ main.js
â”‚
â”œâ”€â”€ templates/                      # Jinja2 æ¨¡æ¿
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ data/                           # æ¨¡å‹æ•°æ®
â”‚   â””â”€â”€ best.pt                     # YOLOv8 æ¨¡å‹æƒé‡
â”‚
â””â”€â”€ output/                         # è¾“å‡ºç»“æœ
    â”œâ”€â”€ 20260118/                   # æ—¥æœŸç›®å½•
    â”œâ”€â”€ 20260119/
    â””â”€â”€ videos/                     # å‘Šè­¦è§†é¢‘å­˜å‚¨

```

## ä¾èµ–å…³ç³»

```
app.py
    â†“
    â”œâ†’ modules.detector_thread       # åå°çº¿ç¨‹
    â”‚   â†“
    â”‚   â”œâ†’ modules.video_processor   # èµ„æºå®¹å™¨
    â”‚   â”‚   â†“
    â”‚   â”‚   â”œâ†’ core.detection        # YOLO æ£€æµ‹
    â”‚   â”‚   â”œâ†’ core.tracker          # SORT è¿½è¸ª
    â”‚   â”‚   â”œâ†’ core.camera           # æ‘„åƒå¤´ç®¡ç†
    â”‚   â”‚   â”œâ†’ core.fps              # FPS ç»Ÿè®¡
    â”‚   â”‚   â”œâ†’ utils.visualizer      # OpenCV ç»˜å›¾
    â”‚   â”‚   â”œâ†’ utils.config_loader   # é…ç½®åŠ è½½
    â”‚   â”‚   â”œâ†’ modules.inventory     # åº“å­˜ç®¡ç†
    â”‚   â”‚   â”œâ†’ modules.frame_processor # å¸§å¤„ç†
    â”‚   â”‚   â””â†’ modules.light_controller # ç¯æ§åˆ¶
    â”‚   â”‚
    â”‚   â””â†’ modules.alert_manager     # å‘Šè­¦å½•åˆ¶
    â”‚
    â””â†’ config.config                 # é…ç½®ç®¡ç†
```

## æ¨¡å—è¯´æ˜

### core/ - è§†è§‰æ£€æµ‹å¼•æ“
ç‹¬ç«‹çš„è®¡ç®—æœºè§†è§‰å¤„ç†ï¼Œä¸æ¶‰åŠä¸šåŠ¡é€»è¾‘ï¼š
- **detection.py**: YOLOv8 æ¨¡å‹æ¨ç†åŒ…è£…
- **tracker.py**: SORT å¤šç›®æ ‡è·Ÿè¸ª
- **camera.py**: è§†é¢‘æºç®¡ç†ï¼ˆæ‘„åƒå¤´/è§†é¢‘æ–‡ä»¶ï¼‰
- **fps.py**: å¸§ç‡ç»Ÿè®¡ä¸ç®¡ç†

### modules/ - ä¸šåŠ¡é€»è¾‘å±‚
é¡¹ç›®ç‰¹å®šçš„ä¸šåŠ¡å¤„ç†ï¼š
- **detector_thread.py**: åå°æ£€æµ‹å¾ªç¯çº¿ç¨‹
- **video_processor.py**: åˆå§‹åŒ–å’Œç®¡ç†æ‰€æœ‰æ£€æµ‹æ¨¡å—
- **alert_manager.py**: å¼‚å¸¸äº‹ä»¶æ£€æµ‹å’Œè§†é¢‘å½•åˆ¶
- **inventory.py**: åº“å­˜ç»Ÿè®¡å’Œç¼ºå¤±æ£€æµ‹
- **frame_processor.py**: å•å¸§æµæ°´çº¿å¤„ç†
- **light_controller.py**: ä¸‰è‰²è­¦ç¤ºç¯é€šä¿¡

### utils/ - å·¥å…·æ¨¡å—
é€šç”¨å·¥å…·å‡½æ•°å’Œè¾…åŠ©ç±»ï¼š
- **config_loader.py**: é…ç½®æ–‡ä»¶åŠ è½½å’Œç”¨æˆ·è®¾ç½®ç®¡ç†
- **visualizer.py**: OpenCV ç»˜å›¾å·¥å…·
- **source_handler.py**: è§†é¢‘æºå¤„ç†

### config/ - é…ç½®ç®¡ç†
- **config.py**: æ‰€æœ‰é»˜è®¤å‚æ•°å®šä¹‰
- **Configuration.json**: ä¸šåŠ¡é…ç½®ï¼ˆç‰©å“æ¸…å•ç­‰ï¼‰
- **user_settings.json**: è‡ªåŠ¨ç”Ÿæˆï¼Œå­˜å‚¨ç”¨æˆ·å‚æ•°

## å¯åŠ¨æ–¹å¼

```bash
# æ ‡å‡†å¯åŠ¨
python app.py
```

## é…ç½®æ–‡ä»¶

**ä¸šåŠ¡é…ç½®** `config/Configuration.json`
```json
{
  "class0": {
    "name": "storage box",
    "contains": {
      "class1": { "name": "item1", "quantity": 3 }
    }
  }
}
```

**ç”¨æˆ·è®¾ç½®** `config/user_settings.json` (è‡ªåŠ¨ç”Ÿæˆ)
```json
{
  "source": "0",
  "model": "data/best.pt",
  "conf": 0.25,
  ...
}
```

## ä»£ç é£æ ¼

- ä½¿ç”¨ pathlib.Path å¤„ç†è·¯å¾„
- ç±»åé‡‡ç”¨é©¼å³°å‘½å (CamelCase)
- å‡½æ•°åé‡‡ç”¨ä¸‹åˆ’çº¿å‘½å (snake_case)
- æ·»åŠ ç±»å‹æç¤º
- è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²

